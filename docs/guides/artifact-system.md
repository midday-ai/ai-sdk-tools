# Artifact System Guide

Learn how to create and use artifacts for data-driven visualizations.

## What are Artifacts?

Artifacts are typed data structures that can be:
- Generated by AI
- Streamed in real-time
- Visualized in canvas components
- Updated progressively
- Validated with schemas

## Creating an Artifact

### 1. Define the Schema

**File**: `apps/example/src/ai/artifacts/my-artifact.ts`

```typescript
import { artifact } from "ai-sdk-tools"
import { z } from "zod"

export const MyArtifact = artifact(
  "my-artifact",  // Unique identifier
  z.object({
    // Metadata
    title: z.string(),
    stage: z.enum(["loading", "processing", "complete"]),
    progress: z.number().min(0).max(1),

    // Your data
    data: z.object({
      items: z.array(z.object({
        name: z.string(),
        value: z.number(),
      })),
      total: z.number(),
    })
  })
)

export type MyArtifact = z.infer<typeof MyArtifact>
```

### 2. Create Canvas Component

**File**: `apps/example/src/components/canvas/my-canvas.tsx`

```typescript
"use client"

import { useArtifact } from "ai-sdk-tools/client"
import { MyArtifact } from "@/ai/artifacts/my-artifact"
import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { ProgressToast } from "@/components/ui/progress-toast"

export function MyCanvas() {
  const artifact = useArtifact(MyArtifact)

  if (!artifact.data) {
    return (
      <div className="flex items-center justify-center h-full">
        <p>Loading...</p>
      </div>
    )
  }

  const data = artifact.data
  const isLoading = data.stage !== "complete"

  return (
    <div className="h-full overflow-auto p-6 space-y-6">
      {/* Header */}
      <div>
        <h2 className="text-2xl font-mono">{data.title}</h2>
      </div>

      {/* Content */}
      <Card>
        <CardHeader>
          <CardTitle>Data</CardTitle>
        </CardHeader>
        <CardContent>
          {data.data.items.map((item) => (
            <div key={item.name}>
              {item.name}: {item.value}
            </div>
          ))}
          <div className="font-semibold">
            Total: {data.data.total}
          </div>
        </CardContent>
      </Card>

      {/* Loading toast */}
      <ProgressToast
        isVisible={isLoading}
        stage={data.stage}
      />
    </div>
  )
}
```

### 3. Register Canvas

**File**: `apps/example/src/components/canvas/index.ts`

```typescript
export { MyCanvas } from "./my-canvas"
```

## Using Artifacts in AI

### Generate Artifact Data

```typescript
// In your AI route
import { MyArtifact } from "@/ai/artifacts/my-artifact"

const result = await generateObject({
  schema: MyArtifact,
  prompt: "Create a summary with data"
})
```

### Stream Artifact Updates

```typescript
const stream = await streamObject({
  schema: MyArtifact,
  prompt: "Generate dashboard",
  onUpdate: (partial) => {
    // Partial updates streamed to client
  }
})
```

## Best Practices

1. **Use stages** - loading → processing → analyzing → complete
2. **Include progress** - 0-1 value for progress bars
3. **Validate data** - Use Zod for type safety
4. **Handle partial data** - Stream updates gracefully
5. **Show loading states** - Use ProgressToast

## See Also

- [Dashboard Components](../component-reference/dashboard-components.md)
- [Custom Dashboards Guide](./custom-dashboards.md)
